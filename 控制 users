<?php
// users.php

require('dbconfig.php');

define('ROLE_USER', 0);
define('ROLE_MERCHANT', 1);

function registerUser($account, $password)
{
    global $db;
    $role = ROLE_USER;
    $sql = "INSERT INTO users (account, password, role) VALUES (?, ?, ?)";
    $stmt = mysqli_prepare($db, $sql);
    mysqli_stmt_bind_param($stmt, "sss", $account, $password, $role);
    mysqli_stmt_execute($stmt);
    return mysqli_insert_id($db);
}

function loginUser($account, $password)
{
    global $db;
    $sql = "SELECT * FROM users WHERE account=? AND password=?";
    $stmt = mysqli_prepare($db, $sql);
    mysqli_stmt_bind_param($stmt, "ss", $account, $password);
    mysqli_stmt_execute($stmt);
    $result = mysqli_stmt_get_result($stmt);
    return mysqli_fetch_assoc($result);
}
?>
<?php
// clients.php

require('dbconfig.php');

function addClient($userID, $clientName, $clientAddress)
{
    global $db;
    $sql = "INSERT INTO clients (userID, clientName, clientAddress) VALUES (?, ?, ?)";
    $stmt = mysqli_prepare($db, $sql);
    mysqli_stmt_bind_param($stmt, "iss", $userID, $clientName, $clientAddress);
    mysqli_stmt_execute($stmt);
    return mysqli_insert_id($db);
}
?>
